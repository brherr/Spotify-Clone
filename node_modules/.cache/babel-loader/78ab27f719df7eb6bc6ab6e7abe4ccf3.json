{"ast":null,"code":"import _slicedToArray from\"C:/Users/Brad/Desktop/Projects/spotify/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import'./App.css';import Login from'./Login';import{getTokenFromUrl}from'./spotify';import SpotifyWebApi from'spotify-web-api-js';import Player from'./Player';import{useDataLayerValue}from'./DataLayer';import{jsx as _jsx}from\"react/jsx-runtime\";var spotify=new SpotifyWebApi();function App(){var _useDataLayerValue=useDataLayerValue(),_useDataLayerValue2=_slicedToArray(_useDataLayerValue,2),token=_useDataLayerValue2[0].token,dispatch=_useDataLayerValue2[1];useEffect(function(){var hash=getTokenFromUrl();window.location.hash='';var _token=hash.access_token;if(_token){spotify.setAccessToken(_token);dispatch({type:'SET_TOKEN',token:_token});spotify.getMe().then(function(user){dispatch({type:'SET_USER',user:user});});spotify.getUserPlaylists().then(function(playlists){dispatch({type:'SET_PLAYLISTS',playlists:playlists});});spotify.getPlaylist('37i9dQZEVXcDKwfS1dfIel?gtm=1').then(function(response){return dispatch({type:'SET_DISCOVER_WEEKLY',discover_weekly:response});});spotify.getMyTopArtists().then(function(response){return dispatch({type:'SET_TOP_ARTISTS',top_artists:response});});dispatch({type:'SET_SPOTIFY',spotify:spotify});}},[token,dispatch]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:token?/*#__PURE__*/_jsx(Player,{spotify:spotify}):/*#__PURE__*/_jsx(Login,{})});}export default App;","map":{"version":3,"sources":["C:/Users/Brad/Desktop/Projects/spotify/src/App.js"],"names":["React","useEffect","Login","getTokenFromUrl","SpotifyWebApi","Player","useDataLayerValue","spotify","App","token","dispatch","hash","window","location","_token","access_token","setAccessToken","type","getMe","then","user","getUserPlaylists","playlists","getPlaylist","response","discover_weekly","getMyTopArtists","top_artists"],"mappings":"6JAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,OAASC,eAAT,KAAgC,WAAhC,CACA,MAAOC,CAAAA,aAAP,KAA0B,oBAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAASC,iBAAT,KAAkC,aAAlC,C,2CAEA,GAAMC,CAAAA,OAAO,CAAG,GAAIH,CAAAA,aAAJ,EAAhB,CAEA,QAASI,CAAAA,GAAT,EAAe,CACb,uBAA8BF,iBAAiB,EAA/C,0DAASG,KAAT,wBAASA,KAAT,CAAkBC,QAAlB,wBAGAT,SAAS,CAAC,UAAM,CACd,GAAMU,CAAAA,IAAI,CAAGR,eAAe,EAA5B,CACAS,MAAM,CAACC,QAAP,CAAgBF,IAAhB,CAAuB,EAAvB,CACA,GAAIG,CAAAA,MAAM,CAAGH,IAAI,CAACI,YAAlB,CAEA,GAAID,MAAJ,CAAY,CACVP,OAAO,CAACS,cAAR,CAAuBF,MAAvB,EAEAJ,QAAQ,CAAC,CACPO,IAAI,CAAE,WADC,CAEPR,KAAK,CAAEK,MAFA,CAAD,CAAR,CAKAP,OAAO,CAACW,KAAR,GAAgBC,IAAhB,CAAqB,SAACC,IAAD,CAAU,CAE7BV,QAAQ,CAAC,CACPO,IAAI,CAAE,UADC,CAEPG,IAAI,CAAEA,IAFC,CAAD,CAAR,CAID,CAND,EAOAb,OAAO,CAACc,gBAAR,GAA2BF,IAA3B,CAAgC,SAACG,SAAD,CAAe,CAC7CZ,QAAQ,CAAC,CACPO,IAAI,CAAE,eADC,CAEPK,SAAS,CAAEA,SAFJ,CAAD,CAAR,CAID,CALD,EAOAf,OAAO,CAACgB,WAAR,CAAoB,8BAApB,EAAoDJ,IAApD,CAAyD,SAAAK,QAAQ,QAC/Dd,CAAAA,QAAQ,CAAC,CACPO,IAAI,CAAE,qBADC,CAEPQ,eAAe,CAAED,QAFV,CAAD,CADuD,EAAjE,EAMAjB,OAAO,CAACmB,eAAR,GAA0BP,IAA1B,CAA+B,SAACK,QAAD,QAC7Bd,CAAAA,QAAQ,CAAC,CACPO,IAAI,CAAE,iBADC,CAEPU,WAAW,CAAEH,QAFN,CAAD,CADqB,EAA/B,EAMAd,QAAQ,CAAC,CACPO,IAAI,CAAE,aADC,CAEPV,OAAO,CAAEA,OAFF,CAAD,CAAR,CAKD,CACF,CA7CQ,CA6CN,CAACE,KAAD,CAAOC,QAAP,CA7CM,CAAT,CAgDA,mBACE,YAAK,SAAS,CAAC,KAAf,UACGD,KAAK,cACJ,KAAC,MAAD,EAAQ,OAAO,CAAEF,OAAjB,EADI,cAEF,KAAC,KAAD,IAHN,EADF,CAOD,CAED,cAAeC,CAAAA,GAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport './App.css';\nimport Login from './Login';\nimport { getTokenFromUrl } from './spotify';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport Player from './Player';\nimport { useDataLayerValue } from './DataLayer';\n\nconst spotify = new SpotifyWebApi();\n\nfunction App() {\n  const [{ token }, dispatch] = useDataLayerValue();\n\n\n  useEffect(() => {\n    const hash = getTokenFromUrl();\n    window.location.hash = '';\n    let _token = hash.access_token\n\n    if (_token) {\n      spotify.setAccessToken(_token)\n     \n      dispatch({\n        type: 'SET_TOKEN',\n        token: _token,\n      });\n\n      spotify.getMe().then((user) => {\n\n        dispatch({\n          type: 'SET_USER',\n          user: user\n        });\n      });\n      spotify.getUserPlaylists().then((playlists) => {\n        dispatch({\n          type: 'SET_PLAYLISTS',\n          playlists: playlists,\n        });\n      });\n    \n      spotify.getPlaylist('37i9dQZEVXcDKwfS1dfIel?gtm=1').then(response => \n        dispatch({\n          type: 'SET_DISCOVER_WEEKLY',\n          discover_weekly: response,\n        }))\n\n      spotify.getMyTopArtists().then((response) => \n        dispatch({\n          type: 'SET_TOP_ARTISTS',\n          top_artists: response,\n        }))\n\n      dispatch({\n        type: 'SET_SPOTIFY',\n        spotify: spotify,\n      });\n    \n    }\n  }, [token,dispatch]);\n\n\n  return (\n    <div className=\"App\">\n      {token ?  \n        <Player spotify={spotify} />\n        : <Login />}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}